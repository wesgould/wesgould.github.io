<!DOCTYPE html>
<html
  lang="en"
  data-theme="dark"
>
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  


<link
  rel="preload"
  as="font"
  type="font/woff2"
  href="/fonts/roboto-slab-latin-400.woff2"
  crossorigin="anonymous"
/>

<link
  rel="preload"
  as="font"
  type="font/woff2"
  href="/fonts/roboto-slab-latin-700.woff2"
  crossorigin="anonymous"
/>


<link
  rel="preload"
  as="font"
  type="font/woff2"
  href="/fonts/fira-code-latin-300.woff2"
  crossorigin="anonymous"
/>
<link
  rel="preload"
  as="font"
  type="font/woff2"
  href="/fonts/fira-code-latin-400.woff2"
  crossorigin="anonymous"
/>

<link
  rel="preload"
  as="font"
  type="font/woff2"
  href="/fonts/fira-code-latin-700.woff2"
  crossorigin="anonymous"
/>

  
  
    <meta
      name="robots"
      content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"
    />
  




<title>Running an LLM locally on Pop!_OS with ROCm support</title>

<meta
  name="description"
  content="Running ROCm on Pop!# This has gotten sooo much easier than when I tried to set this up 2 years ago. ROCm has come a long way, but the support and tooling has advanced as well. Now you don&rsquo;t have to jump through tons of hoops to get AI libraries and software to work with ROCm. The last time I tried this, I needed to add ubuntu repos, edit my /etc/os-release file to pretend I was using ubuntu&quot;, and do a rain-dance to get my Raedeon 6900xt in a usable state.
"
/>

<link rel="canonical" href="https://wesgould.github.io/blog/rocm-on-pop/" />




  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Running an LLM locally on Pop!_OS with ROCm support">
  <meta name="twitter:description" content="Running ROCm on Pop!# This has gotten sooo much easier than when I tried to set this up 2 years ago. ROCm has come a long way, but the support and tooling has advanced as well. Now you don’t have to jump through tons of hoops to get AI libraries and software to work with ROCm. The last time I tried this, I needed to add ubuntu repos, edit my /etc/os-release file to pretend I was using ubuntu&#34;, and do a rain-dance to get my Raedeon 6900xt in a usable state.">

<meta property="og:url" content="https://wesgould.github.io/blog/rocm-on-pop/">
  <meta property="og:site_name" content="wesgould.com">
  <meta property="og:title" content="Running an LLM locally on Pop!_OS with ROCm support">
  <meta property="og:description" content="Running ROCm on Pop!# This has gotten sooo much easier than when I tried to set this up 2 years ago. ROCm has come a long way, but the support and tooling has advanced as well. Now you don’t have to jump through tons of hoops to get AI libraries and software to work with ROCm. The last time I tried this, I needed to add ubuntu repos, edit my /etc/os-release file to pretend I was using ubuntu&#34;, and do a rain-dance to get my Raedeon 6900xt in a usable state.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2024-08-21T10:49:09-04:00">
    <meta property="article:modified_time" content="2024-08-21T10:49:09-04:00">


  <meta itemprop="name" content="Running an LLM locally on Pop!_OS with ROCm support">
  <meta itemprop="description" content="Running ROCm on Pop!# This has gotten sooo much easier than when I tried to set this up 2 years ago. ROCm has come a long way, but the support and tooling has advanced as well. Now you don’t have to jump through tons of hoops to get AI libraries and software to work with ROCm. The last time I tried this, I needed to add ubuntu repos, edit my /etc/os-release file to pretend I was using ubuntu&#34;, and do a rain-dance to get my Raedeon 6900xt in a usable state.">
  <meta itemprop="datePublished" content="2024-08-21T10:49:09-04:00">
  <meta itemprop="dateModified" content="2024-08-21T10:49:09-04:00">
  <meta itemprop="wordCount" content="533">








  
  


  









  
  
    
    
  



  
  
  
  


<style>
   
  @font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:100;src:local("Roboto Slab Thin "),local("Roboto Slab-Thin"),url(/fonts/roboto-slab-latin-100.woff2) format("woff2"),url(/fonts/roboto-slab-latin-100.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:200;src:local("Roboto Slab Extra Light "),local("Roboto Slab-Extra Light"),url(/fonts/roboto-slab-latin-200.woff2) format("woff2"),url(/fonts/roboto-slab-latin-200.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:300;src:local("Roboto Slab Light "),local("Roboto Slab-Light"),url(/fonts/roboto-slab-latin-300.woff2) format("woff2"),url(/fonts/roboto-slab-latin-300.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:400;src:local("Roboto Slab Regular "),local("Roboto Slab-Regular"),url(/fonts/roboto-slab-latin-400.woff2) format("woff2"),url(/fonts/roboto-slab-latin-400.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:500;src:local("Roboto Slab Medium "),local("Roboto Slab-Medium"),url(/fonts/roboto-slab-latin-500.woff2) format("woff2"),url(/fonts/roboto-slab-latin-500.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:600;src:local("Roboto Slab SemiBold "),local("Roboto Slab-SemiBold"),url(/fonts/roboto-slab-latin-600.woff2) format("woff2"),url(/fonts/roboto-slab-latin-600.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:700;src:local("Roboto Slab Bold "),local("Roboto Slab-Bold"),url(/fonts/roboto-slab-latin-700.woff2) format("woff2"),url(/fonts/roboto-slab-latin-700.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:800;src:local("Roboto Slab ExtraBold "),local("Roboto Slab-ExtraBold"),url(/fonts/roboto-slab-latin-800.woff2) format("woff2"),url(/fonts/roboto-slab-latin-800.woff) format("woff")}@font-face{font-display:swap;font-family:Roboto Slab;font-style:normal;font-weight:900;src:local("Roboto Slab Black "),local("Roboto Slab-Black"),url(/fonts/roboto-slab-latin-900.woff2) format("woff2"),url(/fonts/roboto-slab-latin-900.woff) format("woff")}@font-face{font-display:swap;font-family:Fira Code;font-style:normal;font-weight:300;src:local("Fira Code Light "),local("Fira Code-Light"),url(/fonts/fira-code-latin-300.woff2) format("woff2"),url(/fonts/fira-code-latin-300.woff) format("woff")}@font-face{font-display:swap;font-family:Fira Code;font-style:normal;font-weight:400;src:local("Fira Code Regular "),local("Fira Code-Regular"),url(/fonts/fira-code-latin-400.woff2) format("woff2"),url(/fonts/fira-code-latin-400.woff) format("woff")}@font-face{font-display:swap;font-family:Fira Code;font-style:normal;font-weight:500;src:local("Fira Code Medium "),local("Fira Code-Medium"),url(/fonts/fira-code-latin-500.woff2) format("woff2"),url(/fonts/fira-code-latin-500.woff) format("woff")}@font-face{font-display:swap;font-family:Fira Code;font-style:normal;font-weight:600;src:local("Fira Code SemiBold "),local("Fira Code-SemiBold"),url(/fonts/fira-code-latin-600.woff2) format("woff2"),url(/fonts/fira-code-latin-600.woff) format("woff")}@font-face{font-display:swap;font-family:Fira Code;font-style:normal;font-weight:700;src:local("Fira Code Bold "),local("Fira Code-Bold"),url(/fonts/fira-code-latin-700.woff2) format("woff2"),url(/fonts/fira-code-latin-700.woff) format("woff")}

/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}

/*! CC BY-SA 3.0 License | https://stackoverflow.com/a/36118384/1154965 */@keyframes blink{50%{opacity:0}to{opacity:1}}

/*! MIT License | github.com/schnerring/hugo-theme-gruvbox */:root{--ctp-rosewater:#f4dbd6;--ctp-flamingo:#f0c6c6;--ctp-pink:#f5bde6;--ctp-mauve:#c6a0f6;--ctp-red:#ed8796;--ctp-maroon:#ee99a0;--ctp-peach:#f5a97f;--ctp-yellow:#eed49f;--ctp-green:#a6da95;--ctp-teal:#8bd5ca;--ctp-sky:#91d7e3;--ctp-sapphire:#7dc4e4;--ctp-blue:#8aadf4;--ctp-lavender:#b7bdf8;--ctp-text:#cad3f5;--ctp-subtext1:#b8c0e0;--ctp-subtext0:#a5adcb;--ctp-overlay2:#939ab7;--ctp-overlay1:#8087a2;--ctp-overlay0:#6e738d;--ctp-surface2:#5b6078;--ctp-surface1:#494d64;--ctp-surface0:#363a4f;--ctp-base:#24273a;--ctp-mantle:#1e2030;--ctp-crust:#181926;--bg:var(--ctp-base);--bg0:var(--ctp-base);--bg0_h:var(--ctp-crust);--bg0_s:var(--ctp-mantle);--bg1:var(--ctp-surface0);--bg2:var(--ctp-surface1);--bg3:var(--ctp-surface2);--bg4:var(--ctp-overlay0);--fg:var(--ctp-text);--fg0:var(--ctp-text);--fg1:var(--ctp-text);--fg2:var(--ctp-subtext1);--fg3:var(--ctp-subtext0);--fg4:var(--ctp-overlay2);--gray1:var(--ctp-overlay1);--gray2:var(--ctp-overlay0);--rosewater1:var(--ctp-rosewater);--rosewater2:var(--ctp-rosewater);--flamingo1:var(--ctp-flamingo);--flamingo2:var(--ctp-flamingo);--pink1:var(--ctp-pink);--pink2:var(--ctp-pink);--mauve1:var(--ctp-mauve);--mauve2:var(--ctp-mauve);--red1:var(--ctp-red);--red2:var(--ctp-maroon);--peach1:var(--ctp-peach);--peach2:var(--ctp-peach);--yellow1:var(--ctp-yellow);--yellow2:var(--ctp-yellow);--green1:var(--ctp-green);--green2:var(--ctp-green);--teal1:var(--ctp-teal);--teal2:var(--ctp-teal);--sky1:var(--ctp-sky);--sky2:var(--ctp-sky);--sapphire1:var(--ctp-sapphire);--sapphire2:var(--ctp-sapphire);--blue1:var(--ctp-blue);--blue2:var(--ctp-blue);--lavender1:var(--ctp-lavender);--lavender2:var(--ctp-lavender);--primary:var(--blue1);--primary-alt:var(--blue2);--font-monospace:"Fira Code","Lucida Console",Monaco,monospace;--font-sans-serif:Verdana,Helvetica,sans-serif;--font-serif:"Roboto Slab",Georgia,serif}html{font-family:Roboto Slab,Georgia,serif;font-family:var(--font-serif);font-size:1rem;scroll-behavior:smooth}body{word-wrap:break-word;background:#24273a;background:var(--bg);color:#cad3f5;color:var(--fg);line-height:1.675}strong{letter-spacing:.35px}a{color:inherit;-webkit-text-decoration:none;text-decoration:none}a.link--external:after{content:"\2009↗"}img{border:2px solid #363a4f;border:2px solid var(--bg1);height:auto;max-width:100%}::-moz-selection{background:#6e738d;background:var(--bg4);color:#cad3f5;color:var(--fg0)}::selection{background:#6e738d;background:var(--bg4);color:#cad3f5;color:var(--fg0)}h1,h2,h3,h4{color:#cad3f5;color:var(--fg0);font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace);font-weight:300;line-height:1.4}h1 code,h2 code,h3 code,h4 code{font-size:1em}h2,h3,h4{border-bottom:1px solid #363a4f;border-bottom:1px solid var(--bg1)}h1,h2{font-weight:400}h1{font-size:1.875rem}h2{font-size:1.75rem}h3{font-size:1.625rem}@media (min-width:768px){h1{font-size:2.375rem}h2{font-size:2rem}h3{font-size:1.75rem}}h4{font-size:1.5rem}hr{background:#363a4f;background:var(--bg1);border:none;height:1px;margin:3rem auto;width:80%}blockquote,code,pre{border-radius:.2rem;padding:0 .2em}pre code{padding:0}blockquote,code,pre{background:#363a4f;background:var(--bg1)}code,pre{font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace)}code code{background:#494d64;background:var(--bg2)}blockquote,pre{padding:1rem}pre{background:#363a4f!important;background:var(--bg1)!important;overflow:auto}pre code{background:none}blockquote{border-left:5px solid #8aadf4;border-left:5px solid var(--primary-alt);margin:.5rem 0}blockquote:not(.does-not-exist) code{background:#494d64;background:var(--bg2)}blockquote:not(.does-not-exist) p:first-of-type{margin-top:0}blockquote:not(.does-not-exist) p:last-of-type{margin-bottom:0}pre::-webkit-scrollbar{height:.5rem;scrollbar-width:auto}pre::-webkit-scrollbar-track{background:#494d64;background:var(--bg2);border-radius:.2rem}pre::-webkit-scrollbar-thumb{background:#6e738d;background:var(--bg4);border-radius:.2rem}.layout{display:grid;grid-template-areas:"header" "main" "footer";grid-template-rows:auto 1fr auto;height:100vh}main{align-items:start;display:grid;grid-area:main;grid-template-areas:"empty content sidebar";grid-template-columns:1fr minmax(0,1000px) 4fr}header{background:#363a4f;background:var(--bg1);grid-area:header}footer{grid-area:footer}footer,main{margin:.5em 1.1em}.content{grid-area:content}.sidebar{display:none;flex-direction:column;grid-area:sidebar;margin-top:3rem;position:sticky;top:2rem}@media (min-width:992px){.sidebar{display:flex}}header{display:grid;font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace);font-size:1.125rem;grid-template-areas:"heading search nav theme-toggle";grid-template-columns:auto auto 1fr auto;padding:.75rem}.logo{color:#cad3f5;color:var(--fg0);display:flex;font-weight:700;grid-area:heading}.logo:hover .logo__cursor{animation:blink 1s infinite;opacity:1}.logo__chevron,.logo__cursor{margin-left:.5rem}.logo__cursor{opacity:0}.logo__text{display:none}@media (min-width:768px){.logo__text{display:block}}.search{display:flex;grid-area:search;margin:0 1rem}#search__text{background:#494d64;background:var(--bg2);border:1px solid #494d64;border:1px solid var(--bg2);border-radius:.2rem;caret-color:#cad3f5;caret-color:var(--fg);color:#cad3f5;color:var(--fg);outline:none;padding:0 .5rem;width:100%}#search__text:hover{border-color:#5b6078;border-color:var(--bg3)}#search__text:focus{border-color:#6e738d;border-color:var(--bg4)}#search__text::-moz-placeholder{color:#a5adcb;color:var(--fg3)}#search__text::placeholder{color:#a5adcb;color:var(--fg3)}#search__text[type=search]::-webkit-search-cancel-button{-webkit-appearance:none;appearance:none}#search__suggestions{background:#24273a;background:var(--bg);border-radius:.2rem;box-shadow:0 .5rem 1rem #363a4f;box-shadow:0 .5rem 1rem var(--bg1);font-family:Roboto Slab,Georgia,serif;font-family:var(--font-serif);left:0;margin-top:2rem;position:absolute;width:95vw;z-index:1000}@media (min-width:768px){.search{position:relative}#search__suggestions{width:60vw}}.search__suggestions--hidden{display:none}.search__suggestion-item{border-bottom:1px dashed #494d64;border-bottom:1px dashed var(--bg2);display:grid;grid-template-columns:1fr 2fr}.search__suggestion-item:focus,.search__suggestion-item:focus-visible,.search__suggestion-item:hover{background:#363a4f;background:var(--bg1);cursor:pointer;outline:none}.search__suggestion-item:last-child{border:none}.search__suggestion-description,.search__suggestion-title{margin:1rem 0;padding:0 1rem}.search__suggestion-title{font-weight:700}.search__suggestion-description{border-left:1px solid #494d64;border-left:1px solid var(--bg2)}.search__no-results{padding:.75rem}nav#menu{align-items:center;display:flex;grid-area:nav;justify-content:flex-end}nav#menu .menu__item{color:#cad3f5;color:var(--fg)}nav#menu .menu__item:hover{color:#a5adcb;color:var(--fg3);cursor:pointer}nav#menu ul{list-style:none;margin:0;padding:0}nav#menu ul.menu--horizontal{align-items:center;display:none}nav#menu ul.menu--horizontal li{display:inline-block;margin:0 .75rem}@media (min-width:768px){nav#menu ul.menu--horizontal{display:flex}}nav#menu ul.menu--vertical{background:#cad3f5;background:var(--fg0);bottom:0;margin:0;padding:3rem;position:fixed;right:0;top:0;transform:translate(100%);transition:transform .5s cubic-bezier(.9,0,.1,1);width:50%;z-index:10}nav#menu ul.menu--vertical .menu__item{color:#363a4f;color:var(--bg1)}nav#menu ul.menu--vertical .menu__item:hover{color:#6e738d;color:var(--bg4)}nav#menu .menu__burger{display:flex;height:24px;width:24px}nav#menu .menu__burger>*{position:absolute}nav#menu .menu__burger svg{height:inherit;width:inherit;z-index:20}nav#menu .menu__burger input{height:inherit;opacity:0;width:inherit;z-index:30}nav#menu .menu__burger input:checked~ul.menu--vertical{transform:none}nav#menu .menu__burger input:checked~svg{stroke:#363a4f;stroke:var(--bg1)}@media (min-width:768px){nav#menu .menu__burger{display:none}}.sidebar{font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace);margin-left:auto;margin-right:auto;max-width:350px;padding-left:2.5rem}.sidebar hr{margin:1.5rem auto}.sidebar svg{fill:#cad3f5;fill:var(--fg)}.sidebar__heading{font-size:1.3rem}aside.toc a{color:#8aadf4;color:var(--primary-alt)}aside.toc a:hover{color:#8aadf4;color:var(--primary)}aside.toc ul{list-style:none;margin:0;padding:0}aside.toc ul ul{font-size:.9rem;margin-left:.5rem}aside.toc ul li{line-height:1.1}aside.toc ul li a{display:block;padding:.2rem 0}.jr-basics__image{background:#363a4f;background:var(--bg1);border:2px solid #494d64;border:2px solid var(--bg2)}.jr-basics__summary{font-family:Roboto Slab,Georgia,serif;font-family:var(--font-serif);margin:.75rem 0}.jr-basics__profile a:hover,.jr-basics__summary{color:#a5adcb;color:var(--fg3)}.jr-basics__profile a:hover svg{fill:#a5adcb;fill:var(--fg3)}.content-section,.post{border-bottom:2px dotted #363a4f;border-bottom:2px dotted var(--bg1);padding:2rem 0}.post img:not(figure img){box-sizing:border-box;margin:.5rem 0}.post-content__read-more,.post-header{font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace)}.post-content{margin:1.3rem 0}.post-content__read-more{margin-top:1.3rem}.post-content a,.post-content__read-more,.post-header a{color:#8aadf4;color:var(--primary-alt)}.post-content a:hover,.post-header a:hover{color:#8aadf4;color:var(--primary)}.post-heading__anchor{display:none}h1:hover .post-heading__anchor,h2:hover .post-heading__anchor,h3:hover .post-heading__anchor,h4:hover .post-heading__anchor{display:inline-block}.jr__item-meta{flex-direction:column}.jr-basics__image,.jr-basics__item,.jr-basics__profile-icon,.jr-basics__profile-item,.jr__item-meta{align-items:center;display:flex}.jr-awards__title,.jr-basics__name,.jr-education__area,.jr-projects__roles,.jr-publications__name,.jr-volunteer__position,.jr-work__position{font-size:1.125rem;font-weight:700}.jr-basics__item{flex-direction:column;text-align:center}.jr-basics__item hr{margin:1.5rem auto}.jr-basics__image{border-radius:50%;height:250px;justify-content:center;overflow:hidden;width:250px}.jr-basics__label,.jr-basics__name,.jr-basics__summary{margin-top:.75rem}.jr-basics__profile svg{height:24px;width:24px}.jr-basics__profile,.jr-basics__profile-item{display:flex}.jr-basics__profile-item{display:flex;padding:.2rem}.jr-basics__profile--col{flex-direction:column}.jr-basics__profile-icon{padding:0 .75rem}.jr__item-meta{align-items:start;flex-flow:column;font-family:Fira Code,Lucida Console,Monaco,monospace;font-family:var(--font-monospace)}@media (min-width:768px){.jr__item-meta{align-items:center;flex-flow:row wrap}.jr__date,.jr__date-range{flex-grow:1;text-align:right}.jr-awards__awarder,.jr-education__institution,.jr-publications__publisher,.jr-volunteer__organization{flex-basis:100%}}.social-share{align-items:center;border-top:2px dotted #363a4f;border-top:2px dotted var(--bg1);display:flex;flex-wrap:wrap;gap:.9rem;margin:3rem 0;padding-top:3rem}.social-share svg{fill:#cad3f5;fill:var(--fg);height:24px;width:24px}.social-share svg.icon-tabler{fill:none;stroke:#cad3f5;stroke:var(--fg)}.social-share__item{background:#363a4f;background:var(--bg1);display:flex;padding:.5rem}.admonition{border-left:4px solid;border-radius:4px;margin:1.5rem 0;overflow:hidden}.admonition__header{align-items:center;display:flex;font-weight:600;gap:.5rem;padding:.75rem 1rem}.admonition__icon{align-items:center;display:flex;justify-content:center}.admonition__icon,.admonition__icon svg{height:24px;width:24px}.admonition__title{font-size:.875rem;font-weight:600;letter-spacing:.05em;margin:0;text-transform:uppercase}.admonition__content,.admonition__title{color:#cad3f5;color:var(--fg);font-family:Verdana,Helvetica,sans-serif;font-family:var(--font-sans-serif)}.admonition__content{line-height:1.6;padding:.5rem}.admonition__content>:first-child{margin-top:0}.admonition__content>:last-child{margin-bottom:0}.admonition--tip{background:rgba(139,213,202,.1);border-color:#8bd5ca;border-color:var(--ctp-teal)}@supports (color:color-mix(in lch,red,blue)){.admonition--tip{background:color-mix(in srgb,var(--ctp-teal) 10%,transparent)}}.admonition--tip .admonition__header{background:rgba(139,213,202,.2)}@supports (color:color-mix(in lch,red,blue)){.admonition--tip .admonition__header{background:color-mix(in srgb,var(--ctp-teal) 20%,transparent)}}.admonition--tip .admonition__icon{color:#8bd5ca;color:var(--ctp-teal)}.admonition--success{background:rgba(166,218,149,.1);border-color:#a6da95;border-color:var(--ctp-green)}@supports (color:color-mix(in lch,red,blue)){.admonition--success{background:color-mix(in srgb,var(--ctp-green) 10%,transparent)}}.admonition--success .admonition__header{background:rgba(166,218,149,.2)}@supports (color:color-mix(in lch,red,blue)){.admonition--success .admonition__header{background:color-mix(in srgb,var(--ctp-green) 20%,transparent)}}.admonition--success .admonition__icon{color:#a6da95;color:var(--ctp-green)}.admonition--warning{background:hsla(40,70%,78%,.1);border-color:#eed49f;border-color:var(--ctp-yellow)}@supports (color:color-mix(in lch,red,blue)){.admonition--warning{background:color-mix(in srgb,var(--ctp-yellow) 10%,transparent)}}.admonition--warning .admonition__header{background:hsla(40,70%,78%,.2)}@supports (color:color-mix(in lch,red,blue)){.admonition--warning .admonition__header{background:color-mix(in srgb,var(--ctp-yellow) 20%,transparent)}}.admonition--warning .admonition__icon{color:#eed49f;color:var(--ctp-yellow)}
   
</style>

<link
  rel="preload"
  href="/css/non-critical.cdd9eb2c3ae29bd879b54f8c9550eb553991cb9ee5c534a20c27ff09a2ba2dd689b2a17237815633bca2d2d0c7f95a98f1815ce4291f5e79f6923dd0e995dc75.css"
  as="style"
  onload="this.onload=null;this.rel='stylesheet'"
  
    integrity="sha512-zdnrLDrim9h5tU+MlVDrVTmRy57lxTSiDCf/CaK6LdaJsqFyN4FWM7yi0tDH+VqY8YFc5CkfXnn2kj3Q6ZXcdQ=="
  
/>


<link
  id="prism-dark"
  rel="preload"
  href="/prism-themes/prism-catpuccin-macchiato.min.3c4a29a565773676af3741f0b4f9ed0b6002e815ec0699360e4f447d9914facc7ce4a4e5784762c6801a27344013e927da548df1d66313a79f43859623d13af0.css"
  as="style"
  onload="this.onload=null;this.rel='stylesheet'"
  integrity="sha512-PEoppWV3NnavN0HwtPntC2AC6BXsBpk2Dk9EfZkU&#43;sx85KTleEdixoAaJzRAE&#43;kn2lSN8dZjE6efQ4WWI9E68A=="
  
/>


<link
  id="prism-light"
  rel="preload"
  href="/prism-themes/prism-catpuccin-latte.min.1a66e8ec53ade31aef9987318c35750e3ba30e473e35be6560f42f12b7c0ea0c65b7dd03e9119019df000b8e62b785081c8d599fe7f2806bfdaef381c03c3879.css"
  as="style"
  onload="this.onload=null;this.rel='stylesheet'"
  
    integrity="sha512-Gmbo7FOt4xrvmYcxjDV1DjujDkc&#43;Nb5lYPQvErfA6gxlt90D6RGQGd8AC45it4UIHI1Zn&#43;fygGv9rvOBwDw4eQ=="
  
  disabled
/>

<noscript>
  
    <link
      rel="stylesheet"
      href="/prism-themes/prism-catpuccin-macchiato.min.3c4a29a565773676af3741f0b4f9ed0b6002e815ec0699360e4f447d9914facc7ce4a4e5784762c6801a27344013e927da548df1d66313a79f43859623d13af0.css"
      
        integrity="sha512-PEoppWV3NnavN0HwtPntC2AC6BXsBpk2Dk9EfZkU&#43;sx85KTleEdixoAaJzRAE&#43;kn2lSN8dZjE6efQ4WWI9E68A=="
      
    />
  


  <link
    rel="stylesheet"
    href="/css/non-critical.cdd9eb2c3ae29bd879b54f8c9550eb553991cb9ee5c534a20c27ff09a2ba2dd689b2a17237815633bca2d2d0c7f95a98f1815ce4291f5e79f6923dd0e995dc75.css"
    
      integrity="sha512-zdnrLDrim9h5tU+MlVDrVTmRy57lxTSiDCf/CaK6LdaJsqFyN4FWM7yi0tDH+VqY8YFc5CkfXnn2kj3Q6ZXcdQ=="
    
  />
</noscript>


  

  




<script>
  (()=>{document.documentElement.setAttribute("data-theme","dark");document.addEventListener("DOMContentLoaded",function(){let t=document.getElementById("prism-dark"),e=document.getElementById("prism-light");t&&t.removeAttribute("disabled"),e&&e.setAttribute("disabled","")});})();

</script>


  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
<link rel="manifest" href="/site.webmanifest" />
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#282828" />
<meta name="msapplication-TileColor" content="#282828" />
<meta name="theme-color" content="#282828" />



  
  



</head>

  <body>
    <div class="layout">
      <header>
  <a
    class="logo"
    href="/"
  >
    
      <div class="logo__text">wesgould</div>
    
    <div class="logo__chevron">></div>
    <div class="logo__cursor">█</div>
  </a>

  <div class="search">
    <input
      id="search__text"
      type="search"
      placeholder="Search..."
      aria-label="Search"
      autocomplete="off"
    />
    <div id="search__suggestions" class="search__suggestions--hidden"></div>
  </div>

  <nav id="menu">
    <ul class="menu--horizontal">
      
        <li class="menu__item">
          <a href="/blog">Blog</a>
        </li>
      
        <li class="menu__item">
          <a href="/projects">Projects</a>
        </li>
      
        <li class="menu__item">
          <a href="/recipes">Recipes</a>
        </li>
      
        <li class="menu__item">
          <a href="/about">About</a>
        </li>
      
    </ul>

    <div class="menu__burger">
      
      <input class="menu__item" type="checkbox" aria-label="Open main menu" />

      
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-menu-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 6l16 0" />
  <path d="M4 12l16 0" />
  <path d="M4 18l16 0" />
</svg>







      <ul class="menu--vertical">
        
          <li>
            <a class="menu__item" href="/blog">Blog</a>
          </li>
        
          <li>
            <a class="menu__item" href="/projects">Projects</a>
          </li>
        
          <li>
            <a class="menu__item" href="/recipes">Recipes</a>
          </li>
        
          <li>
            <a class="menu__item" href="/about">About</a>
          </li>
        
      </ul>
    </div>
  </nav>

</header>

      <main>
        <div class="content">
          
  <article class="post">
    <div class="post-header">
      <h1>Running an LLM locally on Pop!_OS with ROCm support</h1>
      <div class="post-meta"><span>2024-08-21</span>

  
</div>

    </div>

    <div class="post-content">
      <h2 id="running-rocm-on-pop">Running ROCm on Pop!<a href="#running-rocm-on-pop" class="post-heading__anchor" aria-hidden="true">#</a>
</h2>
<p>This has gotten sooo much easier than when I tried to set this up 2 years ago. ROCm has come a long way, but the support
and tooling has advanced as well. Now you don&rsquo;t have to jump through tons of hoops to get AI libraries and software to
work with ROCm. The last time I tried this, I needed to add ubuntu repos, edit my <code>/etc/os-release</code> file to pretend I was
using ubuntu&quot;, and do a rain-dance to get my Raedeon 6900xt in a usable state.</p>
<p>Then once that was done, you realize that none of the software and libraries incorporated ROCm support and get really
sad that you sold your Nvidia GFX card because &ldquo;radeon works better on linux&rdquo;. Basically, 2 years ago, getting ROCm
setup was a pain in the ass and your only reward was buggy or nonfunctioning software since the AI/ML world is built on
CUDA. Now it&rsquo;s much better with ROCm supporting CUDA and/or most of the libraries incorporating ROCm. Things like
pytorch now support AMD ROCm natively.</p>
<h2 id="getting-rocm-installed-on-pop_os-has-been-simplified-to-copying-and-pasting-some-commands">Getting ROCm installed on Pop!_OS has been simplified to copying and pasting some commands:<a href="#getting-rocm-installed-on-pop_os-has-been-simplified-to-copying-and-pasting-some-commands" class="post-heading__anchor" aria-hidden="true">#</a>
</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>wget https://repo.radeon.com/rocm/rocm.gpg.key -O - | gpg --dearmor | sudo tee /etc/apt/keyrings/rocm.gpg &gt; /dev/null
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;deb [arch=amd64 signed-by=/etc/apt/keyrings/rocm.gpg] https://repo.radeon.com/rocm/apt/6.1 jammy main&#34;</span> | sudo tee 
</span></span><span style="display:flex;"><span>--append /etc/apt/sources.list.d/rocm.list
</span></span><span style="display:flex;"><span>echo -e <span style="color:#e6db74">&#39;Package: *\nPin: release o=repo.radeon.com\nPin-Priority: 600&#39;</span> | sudo tee /etc/apt/preferences.d/rocm-pin-600
</span></span></code></pre></div><p>Then update and install:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt update <span style="color:#f92672">&amp;&amp;</span> sudo apt install rocm
</span></span></code></pre></div><p>Add user to the &lsquo;render&rsquo; group so your user profile has permission to use it.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo usermod -a -G render $USER
</span></span></code></pre></div><p>You can confirm it all works with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rocminfo
</span></span></code></pre></div><h2 id="installing-the-actual-language-models">Installing the actual language models:<a href="#installing-the-actual-language-models" class="post-heading__anchor" aria-hidden="true">#</a>
</h2>
<p>Since we have ROCm installed and working properly, let&rsquo;s install a local LLM. I decided to use Ollama, which is Meta&rsquo;s
open source model. Ollama.ai actually has a script that helps get it all up-and-running quickly. They even have a Linux
version.</p>
<p>I hate that this has become a common practice in the *nix community, because it&rsquo;s such a huge security risk, but they
offer a script you can run if you copy and paste this command:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -fsSL https://ollama.com/install.sh | sh
</span></span></code></pre></div><p>Only do this if you have reviewed the script and/or can REALLY trust the source. You are downloading a script from the
internet and piping it into your shell to run.</p>
<p>There are manual steps here, though, that you can follow if you don&rsquo;t want to use the script:
<a
  href="https://github.com/ollama/ollama/blob/main/docs/linux.md"
  
  
    class="link--external" target="_blank" rel="noreferrer"
  
>https://github.com/ollama/ollama/blob/main/docs/linux.md</a></p>
<p>I ran the script (after I reviewed it!). If you&rsquo;ve done everything properly, you should be able to type:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ollama run llama3
</span></span></code></pre></div><p>



  
  
  
  
  
  
    
    
    
    
    
    
    

    
    
    
    
      
        
          
          
        
        
        
        
          
          
          
        
      
    
      
        
          
          
        
        
        
        
          
          
          
        
      
    
      
        
          
        
        
        
        
          
          
          
        
      
    


    <picture>
      <source
        type="image/webp"
        srcset="/blog/rocm-on-pop/ollama-run-server_hu_4b8f7c885d5495db.webp 300w,/blog/rocm-on-pop/ollama-run-server_hu_68a133ab6bec9be1.webp 500w,/blog/rocm-on-pop/ollama-run-server_hu_204ddc1f65cf587b.webp 700w"
        sizes="(max-width: 499px) 300px,(max-width: 699px) 500px,700px"
      />
      <img
        src="/blog/rocm-on-pop/ollama-run-server.png"
        srcset="/blog/rocm-on-pop/ollama-run-server_hu_d50f7f866976293b.png 300w,/blog/rocm-on-pop/ollama-run-server_hu_339f94402221640a.png 500w,/blog/rocm-on-pop/ollama-run-server_hu_930c48e0a97008c6.png 700w"
        sizes="(max-width: 499px) 300px,(max-width: 699px) 500px,700px"
        alt=""
        
        loading="lazy"
        width="1488"
        height="252"
      />
    </picture>
  






</p>
<p>The first time you run this it will download <code>llama3</code>, which can take a bit, but it will drop you into a prompt. Where
you can talk to it like you would ChatGPT or any other LLM.</p>
<p>



  
  
  
  
  
  
    
    
    
    
    
    
    

    
    
    
    
      
        
          
          
        
        
        
        
          
          
          
        
      
    
      
        
          
          
        
        
        
        
          
          
          
        
      
    
      
        
          
        
        
        
        
          
          
          
        
      
    


    <picture>
      <source
        type="image/webp"
        srcset="/blog/rocm-on-pop/prompt-shot_hu_75654ca9cac67451.webp 300w,/blog/rocm-on-pop/prompt-shot_hu_be437a7b50020907.webp 500w,/blog/rocm-on-pop/prompt-shot_hu_40ee955a9f541c0f.webp 700w"
        sizes="(max-width: 499px) 300px,(max-width: 699px) 500px,700px"
      />
      <img
        src="/blog/rocm-on-pop/prompt-shot.png"
        srcset="/blog/rocm-on-pop/prompt-shot_hu_bcbd72a47e9ee1cb.png 300w,/blog/rocm-on-pop/prompt-shot_hu_750ecede1b33747c.png 500w,/blog/rocm-on-pop/prompt-shot_hu_f68b95ca05edcfdf.png 700w"
        sizes="(max-width: 499px) 300px,(max-width: 699px) 500px,700px"
        alt=""
        
        loading="lazy"
        width="1459"
        height="586"
      />
    </picture>
  






</p>
<p>And thats that! A working LLM on Pop!_OS using ROCm on your Radeon GFX card! The next step is adding a more user friendly, ChatGPT-like interface for it. This way you can discover and switch models easily, save your history, and easily set system prompts and your own guardrails&ndash;all locally, and privately. That will be on the next post when I have some time to tinker with it.</p>

    </div>

    

    
  </article>

        </div>
        <div class="sidebar">
  
    
      <aside class="toc">
        <nav>
          <p class="sidebar__heading">Table Of Contents</p>
          <nav id="TableOfContents">
  <ul>
    <li><a href="#running-rocm-on-pop">Running ROCm on Pop!</a></li>
    <li><a href="#getting-rocm-installed-on-pop_os-has-been-simplified-to-copying-and-pasting-some-commands">Getting ROCm installed on Pop!_OS has been simplified to copying and pasting some commands:</a></li>
    <li><a href="#installing-the-actual-language-models">Installing the actual language models:</a></li>
  </ul>
</nav>
        </nav>
      </aside>
      <hr />
    
  

  
  
    <aside class="bio">
      

  <div class="jr__item jr-basics__item">
    
  <div class="jr-basics__image">
    <img
      src="/CartoonishWes.png"
      alt="Picture of Wes Gould"
      width="250"
      height="250"
    />
  </div>



    
      <div class="jr-basics__name">Wes Gould</div>
    

    
      <div class="jr-basics__label">Flannel Enthusiast</div>
    

    

    

    

    
      <div class="jr-basics__summary">I&#39;m an information technology professional that enjoys disconnecting as much as hacking/tinkering. You&#39;ll likely find posts about hiking alongside raspberrypi, homelab, and arduino projects. Oh, and I put recipes on here so I can find them easily.</div>
    

    
      

      

      
        <div class="jr-basics__location-city">Washington, D.C.</div>
      

      

      
    

    
      <hr />
      <div class="jr-basics__profile jr-basics__profile--col">
        
          

<a href="https://github.com/wesgould" target="_blank" rel="noreferrer me">

<div class="jr-basics__profile-item">
  <div class="jr-basics__profile-icon">
    
    <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
  </div>

  
    <div class="jr-basics__profile-username">wesgould</div>
  
</div>


</a>

        
      </div>
    

    
  </div>



      
    </aside>
  

  
</div>

      </main>
      <footer>
  <div class="copyright">
    
      Copyright © 2003
    
  </div>
</footer>



  








  
  



<script src="/js/main.985c1c6346f1efb050ca83635401fe48afeafa99f9e08025f5a6c6038c3cb301237b746ed15299ec24142ca1054a3fc022fac5804d36eb15759901a5507b79c8.js" integrity="sha512-mFwcY0bx77BQyoNjVAH&#43;SK/q&#43;pn54IAl9abGA4w8swEje3Ru0VKZ7CQULKEFSj/AIvrFgE026xV1mQGlUHt5yA=="></script>
<script src="/js/flexsearch.6f835d75ce18ba271be1a8d3e3d6e6df71c69193be2e6cde4b770c19543e59a54eb7170a70216e2e09a01b41ece0c39ab9c196f512b073f7982f4f1205038928.js" integrity="sha512-b4Nddc4Yuicb4ajT49bm33HGkZO&#43;LmzeS3cMGVQ&#43;WaVOtxcKcCFuLgmgG0Hs4MOaucGW9RKwc/eYL08SBQOJKA=="></script>






    </div>
  </body>
</html>
